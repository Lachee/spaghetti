<html>

<head>
	<meta charset="utf-8" />

	<style>
		body {
			background: #111;
			padding: 100px;
			margin: 0;
		}

		.spaget-indicator {
			position: fixed;
			width: 10px;
			height: 10px;
			background: black;
			clip-path: polygon(100% 0, 64% 43%, 100% 78%, 80% 100%, 36% 64%, 0 100%, 0 0);
		}
	</style>

	<!-- WebAssembly Loading -->
	<!--
	<script src="wasm_exec.js"></script>
	<script>
		const go = new Go();
		WebAssembly.instantiateStreaming(fetch("resources/spaghetti.wasm"), go.importObject).then((result) => {
			go.run(result.instance);
		});
	</script>
	-->
	<script src="resources/bin/spaghetti.js"></script>

	<!-- Live Updating -->
	<script>
		const ws = new WebSocket("ws://" + window.location.host + "/listen");
		ws.addEventListener("message", (event) => { console.log(event); window.location = window.location; });
		ws.addEventListener("close", (event) => { console.error("Live Watch has terminated"); });
		function abort() { ws.close(); }
	</script>
</head>

<body>
	<div id='editor' class="container"></div>
	<script>
		//Fetch the editor
		const editor = new Spaghetti.Editor({ 
			container: document.getElementById('editor')
		});

		//Run the editor
		console.log('starting editor...')
		editor.run().then(() => {
			console.log('editor exited.');
		});
	</script>
</body>

</html>